<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>Guia Completo Ach Pet API</title>
  <link rel="stylesheet" href="guia-completo.css">
</head>
<body>
  <header class="header">
    <h1>Guia Completo <span>Ach Pet API</span></h1>
  </header>
  <section class="hero">
    <img src="img-arquitetura-clean.png" alt="Diagrama Clean Architecture" class="img-diagrama">
    <img src="img-fluxo-negocio.png" alt="Fluxo de Negócio" class="img-fluxo">
  </section>
  <section class="card">
    <h2>Requisitos do Projeto</h2>
    <ul>
      <li>Node.js + TypeScript</li>
      <li>Express (API HTTP)</li>
      <li>PostgreSQL (banco de dados)</li>
      <li>Prisma ORM</li>
      <li>JWT para autenticação</li>
      <li>Arquitetura Clean (domínio, aplicação, infra, apresentação)</li>
      <li>Testes automatizados (Jest)</li>
      <li>Docker para banco local</li>
    </ul>
  </section>

  <section class="card">
    <h2>Passo a Passo para Rodar</h2>
    <ol class="steps">
      <li>
        <strong>Instalar Node.js, Docker e VS Code</strong>
        <ul>
          <li><a href="https://nodejs.org/pt-br/download/" target="_blank" rel="noopener">Node.js</a></li>
          <li><a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener">Docker Desktop</a></li>
          <li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a></li>
        </ul>
      </li>
      <li>
        <strong>Comandos Git Essenciais</strong>
        <div class="code">git init<br>git add .<br>git commit -m "primeiro commit"<br>git branch -M main<br>git remote add origin &lt;url&gt;<br>git push -u origin main</div>
        <span class="tip">Crie commits pequenos e claros. Use branches para novas features.</span>
      </li>
      <li>
        <strong>Instalar dependências</strong>
        <div class="code">npm install</div>
      </li>
      <li>
        <strong>Configurar variáveis de ambiente</strong>
        <div class="code">cp .env.example .env</div>
        <span class="tip">Edite <span class="file">.env</span> e defina <b>JWT_SECRET</b> forte.</span>
      </li>
      <li>
        <strong>Subir o banco de dados</strong>
        <div class="code">docker compose up -d</div>
      </li>
      <li>
        <strong>Gerar client do Prisma e rodar migração</strong>
        <div class="code">npm run prisma:generate<br>npm run prisma:migrate</div>
      </li>
      <li>
        <strong>Rodar a API</strong>
        <div class="code">npm run dev</div>
        <span class="tip">Acesse <b>http://localhost:3000</b></span>
      </li>
      <li>
        <strong>Popular dados de teste (opcional)</strong>
        <div class="code">npm run prisma:seed</div>
      </li>
    </ol>
  </section>

  <h2>Estrutura de Pastas e Arquivos</h2>
  <ul>
    <li class="folder">src/
      <ul>
        <li class="folder">domain/
          <ul>
            <li class="file">entities/
              <ul>
                <li class="file">User.ts</li>
                <li class="file">Pet.ts</li>
                <li class="file">Email.ts</li>
                <li class="file">Password.ts</li>
                <li class="file">Phone.ts</li>
                <li class="file">FollowUpUpdate.ts</li>
                <li class="file">ChatMessage.ts</li>
              </ul>
            </li>
            <li class="file">errors/AppError.ts</li>
          </ul>
        </li>
        <li class="folder">application/
          <ul>
            <li class="folder">ports/
              <ul>
                <li class="file">AuthRepository.ts</li>
                <li class="file">PetsRepository.ts</li>
                <li class="file">AdoptionsRepository.ts</li>
                <li class="file">ChatRepository.ts</li>
                <li class="file">FollowupRepository.ts</li>
                <li class="file">PasswordHasher.ts</li>
                <li class="file">TokenService.ts</li>
              </ul>
            </li>
            <li class="folder">use-cases/
              <ul>
                <li class="folder">auth/
                  <ul>
                    <li class="file">loginUser.ts</li>
                    <li class="file">registerUser.ts</li>
                  </ul>
                </li>
                <li class="folder">pets/
                  <ul>
                    <li class="file">createPet.ts</li>
                    <li class="file">favoritePet.ts</li>
                    <li class="file">getPet.ts</li>
                  </ul>
                </li>
                <li class="folder">adoptions/
                  <ul>
                    <li class="file">createRequest.ts</li>
                    <li class="file">approveRequest.ts</li>
                    <li class="file">rejectRequest.ts</li>
                  </ul>
                </li>
                <li class="folder">chat/
                  <ul>
                    <li class="file">sendMessage.ts</li>
                    <li class="file">listMessages.ts</li>
                  </ul>
                </li>
                <li class="folder">followup/
                  <ul>
                    <li class="file">createUpdate.ts</li>
                    <li class="file">listUpdates.ts</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="folder">infra/
          <ul>
            <li class="folder">repositories/
              <ul>
                <li class="file">PrismaAuthRepository.ts</li>
                <li class="file">PrismaPetsRepository.ts</li>
                <li class="file">PrismaAdoptionsRepository.ts</li>
                <li class="file">PrismaChatRepository.ts</li>
                <li class="file">PrismaFollowupRepository.ts</li>
              </ul>
            </li>
            <li class="folder">security/
              <ul>
                <li class="file">BcryptPasswordHasher.ts</li>
                <li class="file">JwtTokenService.ts</li>
              </ul>
            </li>
            <li class="folder">observability/
              <ul>
                <li class="file">logger.ts</li>
                <li class="file">metrics.ts</li>
                <li class="file">tracing.ts</li>
              </ul>
            </li>
            <li class="folder">db/
              <ul>
                <li class="file">prisma.ts</li>
              </ul>
            </li>
            <li class="folder">config/
              <ul>
                <li class="file">env.ts</li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="folder">presentation/
          <ul>
            <li class="folder">http/
              <ul>
                <li class="file">async-handler.ts</li>
                <li class="file">auth-middleware.ts</li>
                <li class="file">error-middleware.ts</li>
                <li class="folder">routers/
                  <ul>
                    <li class="file">auth-router.ts</li>
                    <li class="file">pets-router.ts</li>
                    <li class="file">adoptions-router.ts</li>
                    <li class="file">chat-router.ts</li>
                    <li class="file">followup-router.ts</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="file">app.ts</li>
            <li class="file">server.ts</li>
          </ul>
        </li>
        <li class="folder">prisma/
          <ul>
            <li class="file">schema.prisma</li>
            <li class="file">seed.ts</li>
            <li class="folder">migrations/</li>
          </ul>
        </li>
        <li class="folder">__tests__/
          <ul>
            <li class="file">auth.integration.test.ts</li>
            <li class="file">pet.test.ts</li>
            <li class="file">registerUser.usecase.test.ts</li>
            <li class="file">integration-fluxos.test.ts</li>
            <li class="file">integration-edgecases.test.ts</li>
            <li class="file">createPet.usecase.test.ts</li>
            <li class="file">businessrules.test.ts</li>
            <li class="file">user.test.ts</li>
            <li class="file">valueobjects.test.ts</li>
          </ul>
        </li>
        <li class="folder">docs/
          <ul>
            <li class="file">arquitetura-clean.md</li>
            <li class="file">fluxo-negocio.md</li>
            <li class="file">openapi-example.yaml</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
                <section class="card">
                  <h2>Checklist Final</h2>
                  <ul class="checklist">
                    <li>README.md revisado e atualizado</li>
                    <li>API rodando localmente</li>
                    <li>Testes automatizados passando</li>
                    <li>Endpoints testados no Postman</li>
                    <li>Banco de dados migrado e populado</li>
                    <li>Commits organizados e claros</li>
                    <li>Documentação de arquitetura e fluxo lida</li>
                    <li>Projeto versionado no GitHub</li>
                  </ul>
                </section>
                <section class="card">
                  <h2>Links Úteis</h2>
                  <ul class="links">
                    <li><a href="https://nodejs.org/pt-br/docs/" target="_blank" rel="noopener">Documentação Node.js</a></li>
                    <li><a href="https://www.prisma.io/docs" target="_blank" rel="noopener">Documentação Prisma</a></li>
                    <li><a href="https://expressjs.com/pt-br/" target="_blank" rel="noopener">Documentação Express</a></li>
                    <li><a href="https://www.postgresql.org/docs/pt-br/" target="_blank" rel="noopener">Documentação PostgreSQL</a></li>
                    <li><a href="https://jestjs.io/pt-BR/docs/getting-started" target="_blank" rel="noopener">Testes com Jest</a></li>
                    <li><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a></li>
                    <li><a href="https://git-scm.com/doc" target="_blank" rel="noopener">Git</a></li>
                    <li><a href="https://code.visualstudio.com/docs" target="_blank" rel="noopener">VS Code</a></li>
                  </ul>
                </section>
                <section class="card dica">
                  <h2>Dica Final</h2>
                  <p>Se tiver dúvidas, consulte os arquivos <span class="file">docs/arquitetura-clean.md</span> e <span class="file">docs/fluxo-negocio.md</span> para entender a lógica e arquitetura.</p>
                </section>
  <div class="endpoint"><b>POST /auth/register</b> — Registrar usuário (ADOPTER/SHELTER)</div>
  <div class="endpoint"><b>POST /auth/login</b> — Login</div>
  <div class="endpoint"><b>GET /pets</b> — Listar pets</div>
  <div class="endpoint"><b>POST /pets</b> — Criar pet (SHELTER)</div>
  <div class="endpoint"><b>POST /adoptions/requests</b> — Solicitar adoção</div>
  <div class="endpoint"><b>POST /adoptions/requests/:id/approve</b> — Aprovar solicitação</div>
  <div class="endpoint"><b>POST /chat/threads/:threadId/messages</b> — Enviar mensagem</div>
  <div class="endpoint"><b>POST /followup/adoptions/:adoptionId/updates</b> — Atualização pós-adoção</div>

  <h2>Fluxo de Negócio (Resumo)</h2>
  <ol>
    <li>Abrigo registra conta (SHELTER).</li>
    <li>Abrigo cadastra pet e fotos.</li>
    <li>Adotante registra conta (ADOPTER).</li>
    <li>Adotante solicita adoção de pet.</li>
    <li>Abrigo aprova/rejeita solicitação.</li>
    <li>Adotante e abrigo podem conversar via chat.</li>
    <li>Adotante envia atualizações pós-adoção.</li>
  </ol>

  <h2>Como Estudar e Replicar</h2>
    <h2>Glossário</h2>
    <ul>
      <li><b>Endpoint</b>: URL de uma funcionalidade da API.</li>
      <li><b>Entidade</b>: Objeto do domínio (ex: Pet, User).</li>
      <li><b>Use Case</b>: Regra de negócio (ex: registrar usuário).</li>
      <li><b>Repository</b>: Interface de acesso a dados.</li>
      <li><b>DTO</b>: Objeto de transferência de dados.</li>
      <li><b>JWT</b>: Token de autenticação.</li>
      <li><b>Prisma</b>: ORM para Node.js.</li>
      <li><b>Docker</b>: Ferramenta para containers.</li>
      <li><b>Branch</b>: Linha de desenvolvimento no git.</li>
      <li><b>Commit</b>: Registro de alteração no git.</li>
    </ul>

    <h2>Checklist Final</h2>
    <ul>
      <li>README.md revisado e atualizado</li>
      <li>API rodando localmente</li>
      <li>Testes automatizados passando</li>
      <li>Endpoints testados no Postman</li>
      <li>Banco de dados migrado e populado</li>
      <li>Commits organizados e claros</li>
      <li>Documentação de arquitetura e fluxo lida</li>
      <li>Projeto versionado no GitHub</li>
    </ul>

    <h2>Links Úteis</h2>
    <ul>
      <li><a href="https://nodejs.org/pt-br/docs/" target="_blank" rel="noopener">Documentação Node.js</a></li>
      <li><a href="https://www.prisma.io/docs" target="_blank" rel="noopener">Documentação Prisma</a></li>
      <li><a href="https://expressjs.com/pt-br/" target="_blank" rel="noopener">Documentação Express</a></li>
      <li><a href="https://www.postgresql.org/docs/pt-br/" target="_blank" rel="noopener">Documentação PostgreSQL</a></li>
      <li><a href="https://jestjs.io/pt-BR/docs/getting-started" target="_blank" rel="noopener">Testes com Jest</a></li>
      <li><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a></li>
      <li><a href="https://git-scm.com/doc" target="_blank" rel="noopener">Git</a></li>
      <li><a href="https://code.visualstudio.com/docs" target="_blank" rel="noopener">VS Code</a></li>
    </ul>
  <ol>
    <li>Leia o README.md para entender o objetivo.</li>
    <li>Instale dependências e configure o ambiente.</li>
    <li>Explore as pastas <span class="folder">src/domain</span> (regras), <span class="folder">src/application</span> (use cases), <span class="folder">src/infra</span> (implementações), <span class="folder">src/presentation</span> (routers).</li>
    <li>Veja os testes em <span class="folder">__tests__</span> para exemplos de uso.</li>
    <li>Rode a API e teste endpoints com Postman ou scripts.</li>
    <li>Compare cada arquivo com o guia acima para entender sua função.</li>
    <li>Replique cada passo, criando arquivos e pastas conforme explicado.</li>
  </ol>

  <h2>Dica Final</h2>
  <p>Se tiver dúvidas, consulte os arquivos <span class="file">docs/arquitetura-clean.md</span> e <span class="file">docs/fluxo-negocio.md</span> para entender a lógica e arquitetura.</p>
</body>
</html>
